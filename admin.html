<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bakery Management | Amour Ang√©lique</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --hot-pink: #698ae8; --mid-pink: #698ae8; --soft-pink: #f0f5ff; }
        body { font-family: 'Fredoka'; background: var(--soft-pink); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .admin-card { background: white; padding: 40px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; border: 3px solid var(--mid-pink); }
        h1 { color: var(--hot-pink); }
        .toggle-btn { padding: 20px 40px; font-size: 1.5rem; font-family: 'Fredoka'; border: none; border-radius: 15px; cursor: pointer; transition: 0.3s; color: white; }
        .open { background: #4CAF50; }
        .closed { background: #f44336; }
        .status-text { margin-top: 20px; font-size: 1.2rem; color: #555; }
    </style>
</head>
<body>
    <div class="admin-card">
        <h1>Bakery Control Panel</h1>
        <button id="statusBtn" class="toggle-btn" onclick="toggleShop()">Loading...</button>
        <p class="status-text">Current Status: <b id="statusDisplay">...</b></p>
    </div>

    <script>
        function updateUI() {
            const isOpen = localStorage.getItem('bakery_status') !== 'closed';
            const btn = document.getElementById('statusBtn');
            const display = document.getElementById('statusDisplay');
            
            if (isOpen) {
                btn.innerText = "CLOSE SHOP";
                btn.className = "toggle-btn closed";
                display.innerText = "OPEN";
                display.style.color = "#4CAF50";
            } else {
                btn.innerText = "OPEN SHOP";
                btn.className = "toggle-btn open";
                display.innerText = "CLOSED";
                display.style.color = "#f44336";
            }
        }

        function toggleShop() {
            const currentStatus = localStorage.getItem('bakery_status');
            if (currentStatus === 'closed') {
                localStorage.setItem('bakery_status', 'open');
            } else {
                localStorage.setItem('bakery_status', 'closed');
            }
            updateUI();
        }

        updateUI();
        // --- RENDER API CONFIG ---
const RENDER_API_KEY = "rnd_Ddq79P1p7r1HYoo42EdtvzKQjVNv"; // Get from Account Settings
const SERVICE_ID = "srv-d5m81qkoud1c7396aa10";         // Get from Site Dashboard URL

/**
 * HARD LOCK: Suspends/Resumes the Render Service
 */
async function syncWithRender(isClosed) {
    const action = isClosed ? 'suspend' : 'resume';
    try {
        await fetch(`https://api.render.com/v1/services/${SERVICE_ID}/${action}`, {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${RENDER_API_KEY}`,
                'Accept': 'application/json'
            }
        });
        console.log("Render Public Status: " + action);
    } catch (e) {
        console.error("Failed to sync with Render.");
    }
}

// UPDATE YOUR TOGGLE FUNCTION TO TRIGGER THE LOCK
const oldToggleShop = window.toggleShop;
window.toggleShop = function() {
    // Run your original logic
    const currentStatus = localStorage.getItem('bakery_status');
    const newStatus = (currentStatus === 'closed') ? 'open' : 'closed';
    localStorage.setItem('bakery_status', newStatus);
    
    // Run the new Render Public Lock
    syncWithRender(newStatus === 'closed');
    
    updateUI();
};

    </script>
</body>
</html>
